---
title: "NBA analytics"
author: "Team 22"
date: "2025-11-07"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
source("00_requirements.R")
source("01_plot_functions.R")
load("../data/21_NBA-Analysis.RData")
```

``` {r}
heatmap_corr <- pheatmap(
  cor(
    nba_processed %>%
      select(where(is.numeric)) %>%
      select(-`Team ID`, -contains("ID")),  # remove indexing columns
    use = "complete.obs"
  ),
  color = colorRampPalette(c("#132B43", "#56B1F7", "#99FFFF"))(200),
  border_color = NA,
  cluster_rows = FALSE,
  cluster_cols = FALSE,
  fontsize = 10,
  fontsize_col = 10,
  fontsize_row = 10,
  cellheight = 18
)

ggsave("../img/plots/corr_heatmap.png", heatmap_corr, width = 10, height = 10, dpi = 600)

head(nba_processed, 10)
```

``` {r}
plot_corr(nba_processed, "Two Pointer Accuracy", "Offensive Rebounds")
cor.test(
  nba_processed$`Two Pointer Accuracy`, 
  nba_processed$`Offensive Rebounds`, 
  method = "pearson")
```


``` {r}
winningness_prop("Three Pointer Accuracy")
cor.test(
  nba_processed$`Three Pointer Accuracy`, 
  as.numeric(nba_processed$`Win/Loss Status` == "W"), 
  method = "spearman")
```

``` {r}
winningness_prop("Two Pointer Accuracy")
cor.test(
  nba_processed$`Two Pointer Accuracy`, 
  as.numeric(nba_processed$`Win/Loss Status` == "W"), 
  method = "spearman")
```

``` {r}
winningness_prop("Three Point Volume")
cor.test(
  nba_processed$`Three Point Volume`, 
  as.numeric(nba_processed$`Win/Loss Status` == "W"), 
  method = "spearman")
```

``` {r}
winningness_of("Assists")
cor.test(
  nba_processed$`Assists`, 
  as.numeric(nba_processed$`Win/Loss Status` == "W"), 
  method = "spearman")
```

``` {r}
winningness_of("Steals")
cor.test(
  nba_processed$`Steals`, 
  as.numeric(nba_processed$`Win/Loss Status` == "W"), 
  method = "spearman")
```

``` {r}
winningness_of("Defensive Rebounds")
cor.test(
  nba_processed$`Defensive Rebounds`, 
  as.numeric(nba_processed$`Win/Loss Status` == "W"), 
  method = "spearman")
```

``` {r}
winningness_of("Blocks")
cor.test(
  nba_processed$`Blocks`, 
  as.numeric(nba_processed$`Win/Loss Status` == "W"), 
  method = "spearman")
```

``` {r}
timeseriesgraph("Three Point Volume")
```

``` {r}
timeseriesgraph("Defensive Rebounds")
```

``` {r}
timeseriesgraph("Offensive Rebounds")
```

``` {r}
timeseriesgraph("Steals")
```


``` {r}
timeseriesgraph("Two Pointer Accuracy")
```

``` {r}
timeseriesgraph("Free Throw Accuracy")
```

``` {r}
timeseriesgraph("Personal Fouls")
```

``` {r}
timeseriesgraph("Three Pointer Accuracy")
```



```{r, echo=FALSE}
save.image("../data/31_NBA-Analysis.RData")
```




